<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Starfleet Academy</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #ffcc66;
      --blue: #0077cc;
      --dark-blue: #001933;
      --black: #000;
      --text: #e6e6e6;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Roboto', sans-serif;
      color: var(--text);
      overflow-x: hidden;
      background: var(--black);
    }

    .page-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 36pt;
      color: var(--gold);
      text-align: center;
      margin: 20px 0 10px;
    }

    #loginScreen {
      position: relative;
      height: 100vh;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      background: url("https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20-%20San%20Francisco.gif") no-repeat center center fixed;
      background-size: cover;
    }

    .lcars-left, .lcars-top, .lcars-bottom {
      position: absolute;
      background: var(--dark-blue);
    }

    .lcars-left {
      top: 0;
      left: 0;
      width: 240px;
      height: 100%;
      border-right: 6px solid var(--gold);
    }

    .lcars-top {
      top: 0;
      left: 0;
      width: 100%;
      height: 50px;
      background: var(--gold);
      border-bottom-left-radius: 50px;
    }

    .lcars-bottom {
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: var(--gold);
      border-top-left-radius: 50px;
    }

    .container {
      background: #000;
      border: 2px solid var(--gold);
      border-radius: 12px;
      box-shadow: 0 0 20px var(--blue);
      padding: 30px 40px;
      width: 420px;
      z-index: 2;
    }

    #loginScreen .container {
      background: rgba(0, 0, 0, 0.7);
    }

    #loginScreen .page-title {
      -webkit-text-stroke: 1px #888;
      text-stroke: 1px #888;
    }

    label {
      display: block;
      color: var(--gold);
      font-size: 14pt;
      margin-bottom: 6px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-bottom: 18px;
      background: #000;
      border: 1px solid var(--blue);
      color: var(--text);
      font-size: 14pt;
      border-radius: 6px;
    }

    button {
      background: linear-gradient(to bottom, #003366, #001933);
      border: 2px solid var(--gold);
      color: var(--gold);
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      border-radius: 10px;
      padding: 12px 20px;
      cursor: pointer;
      box-shadow: inset 0 6px 8px rgba(255,255,255,0.06),
                  inset 0 -6px 10px rgba(0,0,0,0.6),
                  0 6px 12px rgba(0,0,0,0.9);
      transition: transform 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: inset 0 6px 10px rgba(255,255,255,0.08),
                  inset 0 -6px 12px rgba(0,0,0,0.7),
                  0 14px 28px rgba(0,0,0,1);
    }

    .corner-image {
      position: fixed;
      width: 2.5in;
      height: 2.5in;
      object-fit: contain;
      pointer-events: none;
    }

    .corner-left { top: 10px; left: 10px; }
    .corner-right { top: 10px; right: 10px; }

    #accessMessage {
      text-align: center;
      color: var(--gold);
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      margin-top: 12px;
      opacity: 0;
      transition: opacity 0.4s ease-in;
    }

    #mainScreen {
      display: none;
      position: relative;
      height: 100vh;
      overflow-y: auto;
    }

    #mainScreen .container {
      background: #000;
      border: 2px solid var(--gold);
      box-shadow: 0 0 20px var(--blue);
      width: min(calc(100% - 8in), 1000px);
      margin: 220px auto 0;
      text-align: center;
    }

    #orientationPage .orientation-box {
      background: #000;
      border: 2px solid var(--gold);
      border-radius: 12px;
      box-shadow: 0 0 20px var(--blue);
      padding: 30px;
      margin: 40px auto 0;
      width: min(90%, 900px);
      text-align: center;
    }

    #moduleButtons {
      display: grid;
      grid-template-columns: repeat(3, minmax(180px, 1fr));
      gap: 20px;
      justify-items: center;
      align-items: center;
      max-width: 700px;
      margin: 0 auto;
    }

    .fixed-return {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }

    .training-section {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #444;
    }

    .training-section h3 {
      font-size: 18pt;
      color: var(--gold);
      text-align: center;
    }

    .answers {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .answers button {
      width: 90%;
      max-width: 600px;
    }

    .answer-block {
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 10px;
      color: var(--text);
      margin: 8px auto;
      max-width: 800px;
    }

    #examScoreboard {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 260px;
      background: rgba(0,0,0,0.7);
      border: 2px solid var(--gold);
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px var(--gold);
    }

    #examScoreboard h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      color: var(--gold);
      text-align: center;
    }

    #examScoreboard table {
      width: 100%;
      border-collapse: collapse;
    }

    #examScoreboard td {
      padding: 3px;
      color: white;
    }

    #examScoreboard tr.highlight td {
      color: var(--gold);
      font-weight: bold;
    }

    #examProgress {
      text-align: center;
      font-size: 13pt;
      color: var(--gold);
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div id="loginScreen">
    <div class="lcars-left"></div>
    <div class="lcars-top"></div>
    <div class="lcars-bottom"></div>
    <div class="container">
      <div class="page-title">STARFLEET ACADEMY</div>
      <label for="cadetName">Cadet Name</label>
      <input type="text" id="cadetName" required>
      <label for="species">Species</label>
      <select id="species" required>
        <option value="">-- Select Species --</option>
        <option>Human</option>
        <option>Vulcan</option>
        <option>Andorian</option>
        <option>Tellarite</option>
        <option>Bajoran</option>
        <option>Betazoid</option>
        <option>Bolian</option>
        <option>Trill</option>
        <option>Klingon</option>
        <option>Ferengi</option>
        <option>Denobulan</option>
        <option>Orion</option>
        <option>Caitian</option>
        <option>Benzite</option>
      </select>
      <button id="loginBtn">Login</button>
      <p id="accessMessage">Access Granted</p>
    </div>
  </div>

  <div id="mainScreen">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left" alt="">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right" alt="">
    <div class="container">
      <div class="page-title">Welcome to Starfleet Academy</div>
      <div id="mainWelcome" style="font-size:18pt;margin-bottom:20px;"></div>
      <p style="font-size:14pt;color:#fff;margin-bottom:20px;">
        Congratulations, Cadet. You have been accepted into Starfleet Academy,
        where the finest minds of the Federation prepare to serve in the vast
        frontier of space. Here, you will learn the disciplines of command,
        diplomacy, science, engineering, medicine, and security — each a vital
        pillar in the exploration and defense of the Federation.
      </p>
      <p style="font-size:14pt;color:#fff;margin-bottom:48px;">
        Choose your path and begin your training or participate in interactive
        labs and exams to test your readiness for active duty.
      </p>
      <div style="display:flex;justify-content:center;gap:40px;flex-wrap:wrap;">
        <button id="trainingBtn" style="width:240px;">Training</button>
        <button id="labBtn" style="width:240px;">Labs</button>
        <button id="examBtn" style="width:240px;">Exams</button>
      </div>
    </div>
  </div>

  <div id="orientationPage" style="display:none;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left" alt="">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right" alt="">
    <div class="orientation-root" style="text-align:center;margin-top:100px;">
      <div class="page-title" id="orientationTitle"></div>
      <div style="font-size:16pt;margin-bottom:30px;">Select a department to begin.</div>
      <div class="orientation-box">
        <div id="moduleButtons"></div>
      </div>
      <button class="fixed-return" id="returnMain">Return to Main</button>
    </div>
  </div>
  <div id="trainingPage" style="display:none;text-align:center;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left" alt="">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right" alt="">
    <div class="page-title" id="trainingDeptTitle"></div>
    <div id="trainingCadetInfo" style="font-size:16pt;color:var(--gold);margin-bottom:20px;"></div>
    <div id="trainingContent" style="max-width:1000px;margin:0 auto;text-align:left;padding:20px;background:rgba(0,0,0,0.8);border:2px solid var(--gold);border-radius:12px;box-shadow:0 0 15px var(--blue);"></div>
    <button class="fixed-return" id="returnOrientationTrain">Back to Departments</button>
  </div>

  <div id="labPage" style="display:none;text-align:center;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left" alt="">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right" alt="">
    <div class="page-title" id="labDeptTitle"></div>
    <div id="labCadetInfo" style="font-size:16pt;color:var(--gold);margin-bottom:20px;"></div>
    <div id="labContent" style="max-width:1000px;margin:0 auto;text-align:left;padding:20px;background:rgba(0,0,0,0.8);border:2px solid var(--gold);border-radius:12px;box-shadow:0 0 15px var(--blue);"></div>
    <button class="fixed-return" id="returnOrientationLab">Back to Departments</button>
  </div>

  <div id="examPage" style="display:none;text-align:center;">
    <div id="examScoreboard">
      <h3>Class Rankings</h3>
      <div id="examProgress">Questions Answered: 0</div>
      <table id="cadetTable"></table>
    </div>
    <div class="page-title" id="examDeptTitle"></div>
    <div id="examCadetInfo" style="font-size:16pt;color:var(--gold);margin-bottom:20px;"></div>
    <div id="examContent" style="max-width:1000px;margin:0 auto;text-align:left;padding:20px;background:rgba(0,0,0,0.8);border:2px solid var(--gold);border-radius:12px;box-shadow:0 0 15px var(--blue);"></div>
    <button class="fixed-return" id="returnOrientationExam">Back to Departments</button>
  </div>

  <script>
    const trainingFiles = {
      "Command":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Training.json",
      "Diplomacy":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Training.json",
      "Engineering":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Training.json",
      "Security":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Training.json",
      "Science":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Training.json",
      "Medical":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Training.json"
    };

    const labFiles = {
      "Command":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Lab.json",
      "Diplomacy":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Lab.json",
      "Engineering":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Lab.json",
      "Security":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Lab.json",
      "Science":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Lab.json",
      "Medical":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Lab.json"
    };

    const examFiles={...trainingFiles};

    const homeworlds={
      "Human":"Earth","Vulcan":"Vulcan","Andorian":"Andoria","Tellarite":"Tellar Prime",
      "Bajoran":"Bajor","Betazoid":"Betazed","Bolian":"Bolarus IX","Trill":"Trill",
      "Klingon":"Qo'noS","Ferengi":"Ferenginar","Denobulan":"Denobula",
      "Orion":"Orion","Caitian":"Cait","Benzite":"Benzar"
    };

    let cadetName="",species="";

    document.getElementById("loginBtn").addEventListener("click",()=>{
      cadetName=document.getElementById("cadetName").value.trim();
      species=document.getElementById("species").value;
      if(!cadetName||!species)return alert("Enter name and species first.");
      const msg=document.getElementById("accessMessage");
      msg.textContent=`Access Granted — Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
      msg.style.opacity=1;
      setTimeout(()=>{
        document.getElementById("loginScreen").style.display="none";
        document.getElementById("mainWelcome").textContent=`Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
        document.getElementById("mainScreen").style.display="block";
      },3000);
    });

    document.getElementById("trainingBtn").onclick=()=>openOrientation("training");
    document.getElementById("labBtn").onclick=()=>openOrientation("lab");
    document.getElementById("examBtn").onclick=()=>openOrientation("exam");

    function openOrientation(mode){
      document.getElementById("mainScreen").style.display="none";
      const title=document.getElementById("orientationTitle");
      title.textContent=
        mode==="exam"?"Select Exam Department":
        mode==="lab"?"Select Lab Department":
        "Select Training Department";
      const btnBox=document.getElementById("moduleButtons");
      btnBox.innerHTML="";
      Object.keys(trainingFiles).forEach(dept=>{
        const b=document.createElement("button");
        b.textContent=dept;
        b.addEventListener("click",()=>{
          document.getElementById("orientationPage").style.display="none";
          if(mode==="training")loadTraining(dept);
          else if(mode==="lab")loadLab(dept);
          else loadExam(dept);
        });
        btnBox.appendChild(b);
      });
      document.getElementById("orientationPage").style.display="block";
    }

    document.getElementById("returnMain").onclick=()=>{
      document.getElementById("orientationPage").style.display="none";
      document.getElementById("mainScreen").style.display="block";
    };
    document.getElementById("returnOrientationTrain").onclick=()=>{
      document.getElementById("trainingPage").style.display="none";
      document.getElementById("orientationPage").style.display="block";
    };
    document.getElementById("returnOrientationLab").onclick=()=>{
      document.getElementById("labPage").style.display="none";
      document.getElementById("orientationPage").style.display="block";
    };
    document.getElementById("returnOrientationExam").onclick=()=>{
      document.getElementById("examPage").style.display="none";
      document.getElementById("orientationPage").style.display="block";
    };

    function loadTraining(dept){
      document.getElementById("trainingPage").style.display="block";
      document.getElementById("trainingDeptTitle").textContent=`${dept} Training`;
      document.getElementById("trainingCadetInfo").textContent=`Cadet ${cadetName} of ${homeworlds[species]}`;
      const content=document.getElementById("trainingContent");
      content.innerHTML="<p>Loading...</p>";
      fetch(trainingFiles[dept])
        .then(r=>r.json())
        .then(data=>{
          content.innerHTML="";
          if(data.study){
            data.study.forEach(item=>{
              const s=document.createElement("div");
              s.className="training-section";
              s.innerHTML=`<h3>${item.scenario}</h3><p>${item.summary||""}</p>`;
              if(item.answers){
                const ansDiv=document.createElement("div");
                ansDiv.className="answers";
                item.answers.forEach(a=>{
                  const block=document.createElement("div");
                  block.className="answer-block";
                  const label=a.type==="best"?"⭐ Best Answer":"Alternate Answer";
                  block.innerHTML=`<p><strong>${label}:</strong> ${a.text}</p><p><em>Score:</em> ${a.score}</p><p>${a.details||""}</p>`;
                  ansDiv.appendChild(block);
                });
                s.appendChild(ansDiv);
              }
              content.appendChild(s);
            });
          }else content.innerHTML="<p>No training items found.</p>";
        });
    }

    function loadLab(dept){
      document.getElementById("labPage").style.display="block";
      document.getElementById("labDeptTitle").textContent=`${dept} Lab`;
      document.getElementById("labCadetInfo").textContent=`Cadet ${cadetName} of ${homeworlds[species]}`;
      const c=document.getElementById("labContent");
      c.innerHTML="<p>Loading...</p>";
      fetch(labFiles[dept])
        .then(r=>r.json())
        .then(data=>{
          c.innerHTML="";
          if(!data.lab||!data.lab.length){c.innerHTML="<p>No lab scenarios found.</p>";return;}
          let i=0;
          const render=()=>{
            const it=data.lab[i];
            c.innerHTML=`<div class='training-section'><h3>${it.scenario}</h3><p>${it.summary||""}</p></div>`;
            const ans=document.createElement("div");
            ans.className="answers";
            it.answers.forEach(a=>{
              const btn=document.createElement("button");
              btn.textContent=a.text;
              btn.onclick=()=>evaluate(a,it);
              ans.appendChild(btn);
            });
            c.appendChild(ans);
          };
          const evaluate=(ans,it)=>{
            document.querySelectorAll("#labContent .answers button").forEach(b=>b.disabled=true);
            const best=it.answers.find(a=>a.type==="best");
            const f=document.createElement("div");
            if(ans.type==="best")f.innerHTML=`<strong>Correct.</strong> ${ans.details}`;
            else if(ans.type==="alternate")f.innerHTML=`<strong>Acceptable.</strong> ${ans.details}<br><br>Best answer:<br><em>${best.text}</em>`;
            else f.innerHTML=`<strong>Incorrect.</strong> ${ans.details}<br><br>Correct answer:<br><em>${best.text}</em>`;
            c.appendChild(f);
            const n=document.createElement("button");
            n.textContent=i<data.lab.length-1?"Next Scenario":"Finish Lab";
            n.onclick=()=>{i++;if(i<data.lab.length)render();else c.innerHTML="<h3>Lab Complete</h3>";};
            c.appendChild(n);
          };
          render();
        });
    }

    function loadExam(dept){
      document.getElementById("examPage").style.display="block";
      document.getElementById("examDeptTitle").textContent=`${dept} Exam`;
      document.getElementById("examCadetInfo").textContent=`Cadet ${cadetName} of ${homeworlds[species]}`;
      const content=document.getElementById("examContent");
      const table=document.getElementById("cadetTable");
      const progress=document.getElementById("examProgress");
      const classmates=[
        {name:cadetName,gpa:0,self:true},{name:"T'Lor",gpa:0},{name:"Dax",gpa:0},
        {name:"Nog",gpa:0},{name:"Paris",gpa:0},{name:"Vorik",gpa:0},
        {name:"Ro",gpa:0},{name:"O'Brien",gpa:0},{name:"Leeta",gpa:0},{name:"Torres",gpa:0}
      ];
      let answered=0,total=0;
      const update=()=>{
        const rows=[...classmates].sort((a,b)=>b.gpa-a.gpa)
          .map(c=>`<tr class='${c.self?"highlight":""}'><td>${c.self?"You":c.name}</td><td style='text-align:right;'>${c.gpa.toFixed(2)}</td></tr>`).join("");
        table.innerHTML=rows;
        progress.textContent=`Questions Answered: ${answered}`;
      };
      fetch(examFiles[dept])
        .then(r=>r.json())
        .then(data=>{
          const questions=data.study.slice(0,10);
          let i=0;
          const render=()=>{
            const q=questions[i];
            content.innerHTML=`<div class='training-section'><h3>${q.scenario}</h3><p>${q.summary||""}</p></div>`;
            const ans=document.createElement("div");ans.className="answers";
            q.answers.forEach(a=>{
              const btn=document.createElement("button");
              btn.textContent=a.text;
              btn.onclick=()=>evaluate(a,q);
              ans.appendChild(btn);
            });
            content.appendChild(ans);
          };
          const evaluate=(ans,q)=>{
            document.querySelectorAll("#examContent .answers button").forEach(b=>b.disabled=true);
            const best=q.answers.find(a=>a.type==="best");
            const f=document.createElement("div");
            if(ans.type==="best"){f.innerHTML=`<strong>Correct.</strong> ${ans.details}`;total+=ans.score;}
            else if(ans.type==="alternate"){f.innerHTML=`<strong>Acceptable.</strong> ${ans.details}<br><br>Best:<br><em>${best.text}</em>`;total+=ans.score;}
            else f.innerHTML=`<strong>Incorrect.</strong> ${ans.details}<br><br>Correct:<br><em>${best.text}</em>`;
            content.appendChild(f);
            answered++;classmates.find(c=>c.self).gpa=((total/(answered*10))*4)||0;update();
            const n=document.createElement("button");
            n.textContent=i<questions.length-1?"Next Question":"Finish Exam";
            n.onclick=()=>{i++;if(i<questions.length)render();else content.innerHTML=`<h3>Exam Complete</h3><p>Your final GPA: ${((total/(answered*10))*4).toFixed(2)}</p>`;};
            content.appendChild(n);
          };
          update();render();
        });
    }
  </script>
</body>
</html>
