<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Starfleet Academy</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --gold: #ffcc66;
      --blue: #0077cc;
      --dark-blue: #001933;
      --black: #000;
      --text: #e6e6e6;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: var(--black);
      font-family: 'Roboto', sans-serif;
      color: var(--text);
      overflow-x: hidden;
    }

    .page-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 36pt;
      color: var(--gold);
      text-align: center;
      margin: 20px 0 10px;
    }

    #loginScreen {
      position: relative;
      height: 100vh;
      width: 100%;
      background: url("Starfleet Academy - San Francisco.gif") no-repeat center center fixed;
      background-size: cover;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .lcars-left, .lcars-top, .lcars-bottom {
      position: absolute;
      background: var(--dark-blue);
    }

    .lcars-left {
      top: 0;
      left: 0;
      width: 240px;
      height: 100%;
      border-right: 6px solid var(--gold);
    }

    .lcars-top {
      top: 0;
      left: 0;
      width: 100%;
      height: 50px;
      background: var(--gold);
      border-bottom-left-radius: 50px;
    }

    .lcars-bottom {
      bottom: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: var(--gold);
      border-top-left-radius: 50px;
    }

    .container {
      background: rgba(0,0,0,0.8);
      border: 2px solid var(--gold);
      border-radius: 12px;
      box-shadow: 0 0 20px var(--blue);
      padding: 30px 40px;
      width: 420px;
      z-index: 2;
    }

    label {
      display: block;
      color: var(--gold);
      font-size: 14pt;
      margin-bottom: 6px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-bottom: 18px;
      background: #000;
      border: 1px solid var(--blue);
      color: var(--text);
      font-size: 14pt;
      border-radius: 6px;
    }

    button {
      background: linear-gradient(to bottom, #003366, #001933);
      border: 2px solid var(--gold);
      color: var(--gold);
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      border-radius: 10px;
      padding: 12px 20px;
      cursor: pointer;
      box-shadow: inset 0 6px 8px rgba(255,255,255,0.06),
                  inset 0 -6px 10px rgba(0,0,0,0.6),
                  0 6px 12px rgba(0,0,0,0.9);
      transition: transform 0.2s;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: inset 0 6px 10px rgba(255,255,255,0.08),
                  inset 0 -6px 12px rgba(0,0,0,0.7),
                  0 14px 28px rgba(0,0,0,1);
    }

    .corner-image {
      position: fixed;
      width: 2.5in;
      height: 2.5in;
      object-fit: contain;
      pointer-events: none;
    }

    .corner-left { top: 10px; left: 10px; }
    .corner-right { top: 10px; right: 10px; }

    #accessMessage {
      text-align: center;
      color: var(--gold);
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      margin-top: 12px;
      opacity: 0;
      transition: opacity 0.4s ease-in;
    }

    #mainScreen {
      display: none;
      position: relative;
      height: 100vh;
      overflow-y: auto;
    }

    #mainScreen .container {
      background: #000;
      border: 2px solid var(--gold);
      box-shadow: 0 0 20px var(--blue);
      width: min(calc(100% - 6in), 1400px);
      margin: 160px auto 0;
      text-align: center;
    }

    .fixed-return {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 1000;
    }

    .training-section {
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 1px solid #444;
    }

    .training-section h3 {
      font-size: 18pt;
      color: var(--gold);
      text-align: center;
    }

    .answers {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
    }

    .answers button {
      width: 90%;
      max-width: 600px;
    }

    .answer-block {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      background: rgba(255,255,255,0.05);
      border-radius: 10px;
      padding: 12px 16px;
      margin: 8px auto;
      max-width: 800px;
      color: #ffffff;
      text-align: left;
      line-height: 1.5;
    }

    .answer-block p {
      margin: 4px 0;
    }

    #labContent, #examContent {
      font-family: 'Roboto', sans-serif;
      font-size: 14pt;
      color: #ffffff;
      line-height: 1.6;
    }

    #examScoreboard {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 260px;
      background: rgba(0,0,0,0.7);
      border: 2px solid var(--gold);
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 0 10px var(--gold);
    }

    #examScoreboard h3 {
      font-family: 'Orbitron', sans-serif;
      font-size: 16pt;
      color: var(--gold);
      text-align: center;
    }

    #examScoreboard table {
      width: 100%;
      border-collapse: collapse;
    }

    #examScoreboard td {
      padding: 3px;
      color: white;
    }

    #examScoreboard tr.highlight td {
      color: var(--gold);
      font-weight: bold;
    }

    #examProgress {
      text-align: center;
      font-size: 13pt;
      color: var(--gold);
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <script>
    const trainingFiles = {
      "Command": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Training.json",
      "Diplomacy": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Training.json",
      "Engineering": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Training.json",
      "Security": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Training.json",
      "Science": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Training.json",
      "Medical": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Training.json"
    };

    const labFiles = {
      "Command": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Lab.json",
      "Diplomacy": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Lab.json",
      "Engineering": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Lab.json",
      "Security": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Lab.json",
      "Science": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Lab.json",
      "Medical": "https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Lab.json"
    };

    const examFiles = { ...trainingFiles };

    const overviews = {
      "Command": "The captain’s chair is a place of decisions, not comfort. Every order carries consequences measured in lives and duty. In these scenarios, you will weigh risk against principle, instinct against protocol, and find that leadership rarely offers an easy path. Command is not about absolute authority; it is about absolute responsibility.",
      "Diplomacy": "Every encounter is an opportunity to prevent conflict before it begins. Your words may avert wars, your patience may save lives, and your restraint may preserve the Federation’s ideals. Diplomacy is the first line of defense, and its success depends on your ability to listen as much as to speak.",
      "Engineering": "The ship depends on you more than it knows. You direct damage control, enforce safety, and keep the vessel operational under pressure. When systems fail and chaos rises, engineers restore order through logic, precision, and nerve. Starfleet ships are only as strong as their engineers.",
      "Science": "To explore is to risk the unknown. You will balance curiosity with caution, interpreting data that may redefine what is possible. In every scenario, seek truth without losing sight of the mission’s safety—or the ethics that guide it. Exploration is our mandate, but understanding is our purpose.",
      "Medical": "Every injury, every illness, every crisis passes through your hands. You are the line between life and loss. Medical officers must combine empathy with action, intellect with instinct, and calm with urgency. The health of the crew—and the mission itself—depends on your care.",
      "Security": "The safety of the ship begins with you. Your duty is to maintain order, enforce protocols, and neutralize threats with precision. Security demands discipline and control—defense tempered by judgment. Every action you take protects not just lives, but the ideals those lives serve."
    };

    const homeworlds = {
      "Human": "Earth", "Vulcan": "Vulcan", "Andorian": "Andoria", "Tellarite": "Tellar Prime",
      "Bajoran": "Bajor", "Betazoid": "Betazed", "Bolian": "Bolarus IX", "Trill": "Trill",
      "Klingon": "Qo'noS", "Ferengi": "Ferenginar", "Denobulan": "Denobula", "Orion": "Orion",
      "Caitian": "Cait", "Benzite": "Benzar"
    };

    let cadetName = "", species = "";

    document.getElementById("loginBtn").addEventListener("click", () => {
      cadetName = document.getElementById("cadetName").value.trim();
      species = document.getElementById("species").value;
      if (!cadetName || !species) return alert("Enter name and species first.");
      const msg = document.getElementById("accessMessage");
      msg.textContent = `Access Granted — Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
      msg.style.opacity = 1;
      setTimeout(() => {
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("mainWelcome").textContent = `Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
        document.getElementById("mainScreen").style.display = "block";
      }, 5000);
    });

    document.getElementById("trainingBtn").addEventListener("click", () => openOrientation("training"));
    document.getElementById("labBtn").addEventListener("click", () => openOrientation("lab"));
    document.getElementById("examBtn").addEventListener("click", () => openOrientation("exam"));

    function openOrientation(mode) {
      document.getElementById("mainScreen").style.display = "none";
      const title = document.getElementById("orientationTitle");
      title.textContent = mode === "exam" ? "Select Exam Department" :
                          mode === "lab"  ? "Select Lab Department"  :
                                            "Select Training Department";
      const btnBox = document.getElementById("moduleButtons");
      btnBox.innerHTML = "";
      Object.keys(trainingFiles).forEach(dept => {
        const b = document.createElement("button");
        b.textContent = dept;
        b.addEventListener("click", () => {
          if (mode === "training") loadTraining(dept);
          else if (mode === "lab") loadLab(dept);
          else loadExam(dept);
        });
        btnBox.appendChild(b);
      });
      document.getElementById("orientationPage").style.display = "block";
    }

    document.getElementById("returnMain").onclick = () => {
      document.getElementById("orientationPage").style.display = "none";
      document.getElementById("mainScreen").style.display = "block";
    };
    document.getElementById("returnOrientationTrain").onclick = () => {
      document.getElementById("trainingPage").style.display = "none";
      document.getElementById("orientationPage").style.display = "block";
    };
    document.getElementById("returnOrientationLab").onclick = () => {
      document.getElementById("labPage").style.display = "none";
      document.getElementById("orientationPage").style.display = "block";
    };
    document.getElementById("returnOrientationExam").onclick = () => {
      document.getElementById("examPage").style.display = "none";
      document.getElementById("orientationPage").style.display = "block";
    };

    function loadTraining(dept) {
      document.getElementById("orientationPage").style.display = "none";
      document.getElementById("trainingPage").style.display = "block";
      document.getElementById("trainingDeptTitle").textContent = `${dept} Training`;
      document.getElementById("trainingCadetInfo").textContent = `Cadet ${cadetName} of ${homeworlds[species]}`;
      const content = document.getElementById("trainingContent");
      content.innerHTML = `<div class='training-section'><p>${overviews[dept]}</p></div><p>Loading...</p>`;
      fetch(trainingFiles[dept])
        .then(r => r.json())
        .then(data => {
          content.innerHTML = `<div class='training-section'><p>${overviews[dept]}</p></div>`;
          if (data.study) {
            data.study.forEach(item => {
              const section = document.createElement("div");
              section.className = "training-section";
              section.innerHTML = `<h3>${item.scenario}</h3><p>${item.summary || ""}</p>`;
              if (item.answers) {
                const answersDiv = document.createElement("div");
                answersDiv.className = "answers";
                item.answers.forEach(ans => {
                  const block = document.createElement("div");
                  block.className = "answer-block";
                  const label = ans.type === "best" ? "⭐ Best Answer" : "Alternate Answer";
                  block.innerHTML = `<p><strong>${label}:</strong> ${ans.text}</p><p><em>Score:</em> ${ans.score}</p><p>${ans.details || ""}</p>`;
                  answersDiv.appendChild(block);
                });
                section.appendChild(answersDiv);
              }
              content.appendChild(section);
            });
          } else content.innerHTML += "<p>No training items found.</p>";
        });
    }
  </script>
</body>
</html>
