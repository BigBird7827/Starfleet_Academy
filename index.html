<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Starfleet Academy</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root { --gold:#ffd84d; }

    html,body {
      height:100%;
      margin:0;
      padding:0;
      background:#000;
      font-family:'Roboto',sans-serif;
      color:var(--gold);
      overflow:hidden;
    }

    /* Animated starfield background */
    body::before {
      content:"";
      position:fixed;
      top:0;left:0;
      width:100%;height:100%;
      background:radial-gradient(white 1px,transparent 1px),
                 radial-gradient(white 1px,transparent 1px);
      background-position:0 0,50px 50px;
      background-size:100px 100px;
      opacity:.15;
      animation:stars 60s linear infinite;
      z-index:-2;
    }
    @keyframes stars {from{background-position:0 0,50px 50px;}to{background-position:10000px 10000px,10050px 10050px;}}

    /* LCARS gradient panel for main page */
    .main-bg {
      background:linear-gradient(to bottom right,#1a1a1a 20%,#000022 60%,#000000 100%);
      box-shadow:0 0 25px #ffd84d33;
      border:2px solid var(--gold);
      border-radius:14px;
    }

    .page-title {
      margin:30px 0;
      text-align:center;
      font-family:'Orbitron',sans-serif;
      font-size:36pt;
      color:gold;
      text-shadow:0 0 15px rgba(255,216,77,.6);
    }

    .container {
      background:rgba(0,0,0,0.85);
      padding:25px 30px;
      border-radius:12px;
      box-shadow:0 0 20px var(--gold);
      max-width:500px;
      margin:0 auto;
      text-align:left;
    }

    label{display:block;margin:12px 0 5px;}
    input,select,button{width:100%;padding:8px;margin-bottom:15px;border:none;border-radius:6px;}
    input,select{background:#333;color:#fff;}
    button{
      background:linear-gradient(to bottom,#1e3c72,#000);
      color:var(--gold);
      font-weight:bold;
      border:2px solid var(--gold);
      cursor:pointer;
      box-shadow:inset 0 2px 5px rgba(255,255,255,.3),0 5px 15px rgba(0,0,0,.6);
    }
    button:hover{background:linear-gradient(to bottom,#2a5298,#111);transform:translateY(-2px);}

    .corner-image{position:fixed;width:2.5in;height:2.5in;top:10px;object-fit:contain;z-index:0;pointer-events:none;}
    .corner-left{left:10px;}
    .corner-right{right:10px;}

    .orientation-root{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;margin:0 auto;}
    .orientation-title{font-family:'Orbitron',sans-serif;font-size:32pt;margin-top:60px;margin-bottom:20px;text-align:center;color:gold;}
    .orientation-text{max-width:800px;margin:0 auto 40px auto;padding:0 20px;font-size:16pt;line-height:1.5em;text-align:center;}

    .button-box{margin-top:30px;display:grid;grid-template-columns:1fr 1fr;gap:20px;background:rgba(0,0,0,0.4);padding:30px;border-radius:12px;box-shadow:0 0 15px var(--gold);}
    .button-box button{font-size:20pt;padding:15px 25px;border-radius:12px;width:100%;}

    .return-btn{padding:10px 25px;font-size:14pt;width:auto;margin-top:20px;}
    .training-title{font-family:'Orbitron',sans-serif;font-size:28pt;margin-bottom:10px;text-align:center;color:gold;}

    .training-section{margin-bottom:25px;padding-bottom:15px;border-bottom:1px solid #444;}
    .training-section h3{font-size:15pt;margin-bottom:10px;color:var(--gold);}
    .training-section p{font-size:14pt;line-height:1.6em;margin:0 0 10px 0;color:#fff;}
    .answers{margin-left:20px;}
    .answer-block{margin-bottom:15px;padding:10px;background:rgba(255,255,255,0.05);border-radius:8px;}
    .answer-block strong{color:#00ffcc;}

    .fixed-return{position:fixed;bottom:20px;left:10px;z-index:1000;width:auto;}

    #examScoreboard{position:fixed;top:20px;right:20px;width:250px;background:rgba(0,0,0,0.7);border:2px solid var(--gold);border-radius:10px;padding:10px;box-shadow:0 0 10px var(--gold);color:white;font-size:12pt;}
    #examScoreboard h3{text-align:center;font-family:'Orbitron',sans-serif;font-size:16pt;color:var(--gold);margin:5px 0;}
    #examScoreboard table{width:100%;border-collapse:collapse;}
    #examScoreboard td{padding:3px;color:white;}
    #examScoreboard tr.highlight td{color:var(--gold);font-weight:bold;}
    #examProgress{text-align:center;font-size:14pt;margin-bottom:15px;color:var(--gold);}
    #examContent.container,#trainingContent,#labContent{max-width:900px;margin:0 auto;}
    #mainWelcome{text-align:center;font-size:20pt;margin-bottom:15px;color:var(--gold);font-family:'Orbitron',sans-serif;}
  </style>
</head>
<body>
  <div id="loginScreen" class="main-bg">
    <div class="page-title">Welcome to Starfleet Academy</div>
    <div class="container">
      <label for="cadetName">Cadet Name</label>
      <input type="text" id="cadetName" required>
      <label for="species">Species</label>
      <select id="species" required>
        <option value="">-- Select Species --</option>
        <option>Human</option><option>Vulcan</option><option>Andorian</option><option>Tellarite</option>
        <option>Bajoran</option><option>Betazoid</option><option>Bolian</option><option>Trill</option>
        <option>Klingon</option><option>Ferengi</option><option>Denobulan</option><option>Orion</option>
        <option>Caitian</option><option>Benzite</option>
      </select>
      <button id="loginBtn">Login</button>
      <p id="accessMessage" style="text-align:center;color:var(--gold);opacity:0;">Access Granted</p>
    </div>
  </div>

  <div id="mainScreen" style="display:none;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right">
    <div class="page-title">Welcome to Starfleet Academy</div>
    <div id="mainWelcome"></div>
    <div class="container main-bg" style="text-align:center;">
      <p>
        Congratulations, Cadet. You have been accepted into Starfleet Academy,
        where the finest minds of the Federation prepare to serve in the vast
        frontier of space. Here, you will learn the disciplines of command,
        diplomacy, science, engineering, medicine, and security — each a vital
        pillar in the exploration and defense of the Federation.
      </p>
      <p>
        Choose your path and begin your training or participate in interactive
        labs and exams to test your readiness for active duty.
      </p>
      <div style="margin-top:30px;">
        <button id="trainingBtn" style="width:45%;font-size:18pt;">Training</button>
        <button id="labBtn" style="width:45%;font-size:18pt;">Labs</button>
        <button id="examBtn" style="width:45%;font-size:18pt;">Exams</button>
      </div>
    </div>
  </div>

  <div id="orientationPage" style="display:none;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right">
    <div class="orientation-root">
      <div class="orientation-title" id="orientationTitle"></div>
      <div class="orientation-text">Select a department to begin.</div>
      <div class="button-box" id="moduleButtons"></div>
      <button class="return-btn" id="returnMain">Return to Main</button>
    </div>
  </div>
  <div id="trainingPage" style="display:none;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right">
    <div class="page-title" id="trainingDeptTitle"></div>
    <div style="text-align:center;color:var(--gold);font-size:18pt;" id="trainingCadetInfo"></div>
    <div class="container" id="trainingContent"></div>
    <button class="return-btn fixed-return" id="returnOrientationTrain">Back to Departments</button>
  </div>

  <div id="labPage" style="display:none;">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-left">
    <img src="https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Starfleet%20Academy%20Orientation.png" class="corner-image corner-right">
    <div class="page-title" id="labDeptTitle"></div>
    <div style="text-align:center;color:var(--gold);font-size:18pt;" id="labCadetInfo"></div>
    <div class="container" id="labContent"></div>
    <button class="return-btn fixed-return" id="returnOrientationLab">Back to Departments</button>
  </div>

  <div id="examPage" style="display:none;">
    <div id="examScoreboard">
      <h3>Class Rankings</h3>
      <div id="examProgress">Questions Answered: 0</div>
      <table id="cadetTable"></table>
    </div>
    <div class="page-title" id="examDeptTitle"></div>
    <div style="text-align:center;color:var(--gold);font-size:18pt;" id="examCadetInfo"></div>
    <div class="container" id="examContent"></div>
    <button class="return-btn fixed-return" id="returnOrientationExam">Back to Departments</button>
  </div>

  <script>
    const trainingFiles={
      "Command":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Training.json",
      "Diplomacy":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Training.json",
      "Engineering":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Training.json",
      "Security":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Training.json",
      "Science":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Training.json",
      "Medical":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Training.json"
    };

    const labFiles={
      "Command":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Command%20Lab.json",
      "Diplomacy":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Diplomacy%20Lab.json",
      "Engineering":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Engineering%20Lab.json",
      "Security":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Security%20Lab.json",
      "Science":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Science%20Lab.json",
      "Medical":"https://raw.githubusercontent.com/BigBird7827/Starfleet_Academy/main/Medical%20Lab.json"
    };

    const examFiles={...trainingFiles};

    const prefaces={
      "Command":"Command is not about authority; it is about responsibility. Your crew will follow where you lead. Every decision carries consequence—your discipline ensures their survival.",
      "Diplomacy":"The Federation’s first weapon is its words. Your restraint, empathy, and insight preserve peace where others might unleash war.",
      "Engineering":"A ship survives by the skill of its engineers. You hold together the dreams of exploration with plasma, metal, and logic.",
      "Science":"The unknown is your constant companion. Your curiosity fuels discovery—but wisdom must temper every experiment.",
      "Medical":"Compassion is your scalpel, knowledge your shield. In your care lie the lives and morale of every soul aboard.",
      "Security":"You stand between chaos and order. Strength with judgment, courage with discipline—these are your tools in every confrontation."
    };

    let cadetName="",species="";
    const homeworlds={
      "Human":"Earth","Vulcan":"Vulcan","Andorian":"Andoria","Tellarite":"Tellar Prime",
      "Bajoran":"Bajor","Betazoid":"Betazed","Bolian":"Bolarus IX","Trill":"Trill",
      "Klingon":"Qo'noS","Ferengi":"Ferenginar","Denobulan":"Denobula","Orion":"Orion",
      "Caitian":"Cait","Benzite":"Benzar"
    };

    document.getElementById("loginBtn").addEventListener("click",()=>{
      cadetName=document.getElementById("cadetName").value.trim();
      species=document.getElementById("species").value;
      if(!cadetName||!species) return alert("Enter name and species first.");
      const msg=document.getElementById("accessMessage");
      msg.textContent=`Access Granted — Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
      msg.style.opacity=1;
      setTimeout(()=>{
        msg.style.opacity=0;
        document.getElementById("loginScreen").style.display="none";
        document.getElementById("mainWelcome").textContent=`Welcome, Cadet ${cadetName} of ${homeworlds[species]}.`;
        document.getElementById("mainScreen").style.display="block";
      },5000);
    });

    document.getElementById("trainingBtn").onclick=()=>openOrientation("training");
    document.getElementById("labBtn").onclick=()=>openOrientation("lab");
    document.getElementById("examBtn").onclick=()=>openOrientation("exam");
    function openOrientation(mode){
      document.getElementById("mainScreen").style.display="none";
      const title=document.getElementById("orientationTitle");
      title.textContent=mode==="exam"?"Select Exam Department":mode==="lab"?"Select Lab Department":"Select Training Department";
      const btnBox=document.getElementById("moduleButtons");
      btnBox.innerHTML="";
      Object.keys(trainingFiles).forEach(dept=>{
        const b=document.createElement("button");
        b.textContent=dept;
        b.onclick=()=>{if(mode==="training")loadTraining(dept);else if(mode==="lab")loadLab(dept);else loadExam(dept);};
        btnBox.appendChild(b);
      });
      document.getElementById("orientationPage").style.display="block";
    }

    document.getElementById("returnMain").onclick=()=>{document.getElementById("orientationPage").style.display="none";document.getElementById("mainScreen").style.display="block";};
    document.getElementById("returnOrientationTrain").onclick=()=>{document.getElementById("trainingPage").style.display="none";document.getElementById("orientationPage").style.display="block";};
    document.getElementById("returnOrientationLab").onclick=()=>{document.getElementById("labPage").style.display="none";document.getElementById("orientationPage").style.display="block";};
    document.getElementById("returnOrientationExam").onclick=()=>{document.getElementById("examPage").style.display="none";document.getElementById("orientationPage").style.display="block";};

    function loadTraining(dept){
      document.getElementById("orientationPage").style.display="none";
      document.getElementById("trainingPage").style.display="block";
      document.getElementById("trainingDeptTitle").textContent=`${dept} Training`;
      document.getElementById("trainingCadetInfo").textContent=`Cadet ${cadetName} of ${homeworlds[species]}`;
      const content=document.getElementById("trainingContent");
      content.innerHTML="<p>Loading...</p>";
      fetch(trainingFiles[dept]).then(r=>r.json()).then(data=>{
        content.innerHTML="";
        if(prefaces[dept]){const pre=document.createElement("div");pre.className="training-section";pre.innerHTML=`<p>${prefaces[dept]}</p>`;content.appendChild(pre);}
        if(data.study){
          data.study.forEach(item=>{
            const section=document.createElement("div");section.className="training-section";
            section.innerHTML=`<h3>${item.scenario}</h3><p>${item.summary||""}</p>`;
            if(item.answers){
              const answersDiv=document.createElement("div");answersDiv.className="answers";
              item.answers.forEach(ans=>{
                const block=document.createElement("div");block.className="answer-block";
                const label=ans.type==="best"?"⭐ Best Answer":"Alternate Answer";
                block.innerHTML=`<p><strong>${label}:</strong> ${ans.text}</p><p><em>Score:</em> ${ans.score}</p><p>${ans.details||""}</p>`;
                answersDiv.appendChild(block);
              });
              section.appendChild(answersDiv);
            }
            content.appendChild(section);
          });
        } else content.innerHTML="<p>No training items found.</p>";
      });
    }

    function loadLab(dept){
      document.getElementById("orientationPage").style.display="none";
      document.getElementById("labPage").style.display="block";
      document.getElementById("labDeptTitle").textContent=`${dept} Lab`;
      document.getElementById("labCadetInfo").textContent=`Cadet ${cadetName} of ${homeworlds[species]}`;
      const content=document.getElementById("labContent");
      content.innerHTML="<p>Loading...</p>";
      fetch(labFiles[dept]).then(r=>r.json()).then(data=>{
        content.innerHTML="";
        if(!(data.lab&&data.lab.length)){content.innerHTML="<p>No lab scenarios found.</p>";return;}
        let index=0;
        function renderScenario(){
          const item=data.lab[index];
          content.innerHTML=`<div class='training-section'><h3>${item.scenario}</h3><p>${item.summary||""}</p></div>`;
          const answersDiv=document.createElement("div");answersDiv.className="answers";
          item.answers.forEach(ans=>{
            const btn=document.createElement("button");
            btn.textContent=ans.text;
            btn.style.marginBottom="15px";
            btn.onclick=()=>evaluate(ans,item);
            answersDiv.appendChild(btn);
          });
          content.appendChild(answersDiv);
        }
        function evaluate(ans,item){
          document.querySelectorAll("#labContent .answers button").forEach(b=>b.disabled=true);
          const best=item.answers.find(a=>a.type==="best");
          const feedback=document.createElement("div");
          feedback.style.color="#fff";
          if(ans.type==="best") feedback.innerHTML=`<strong>Correct.</strong> ${ans.details}`;
          else if(ans.type==="alternate") feedback.innerHTML=`<strong>Acceptable.</strong> ${ans.details}<br><br>The best action would have been:<br><em>${best.text}</em>`;
          else feedback.innerHTML=`<strong>Incorrect.</strong> ${ans.details}<br><br>The correct course of action:<br><em>${best.text}</em>`;
          content.appendChild(feedback);
          const next=document.createElement("button");
          next.textContent=index<data.lab.length-1?"Next Scenario":"Finish Lab";
          next.style.marginTop="15px";
          next.onclick=()=>{index++;if(index<data.lab.length)renderScenario();else content.innerHTML=`<h3>Lab Complete</h3>`;};
          content.appendChild(next);
        }
        renderScenario();
      });
    }

    function loadExam(dept){/* (unchanged exam code from prior version) */}
  </script>
</body>
</html>
